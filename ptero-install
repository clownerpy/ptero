#!/bin/bash

# Spinner function for animations
spinner() {
    local pid=$1
    local delay=0.1
    local spinstr='|/-\'
    while kill -0 $pid 2>/dev/null; do
        local temp=${spinstr#?}
        printf " [%c]  " "$spinstr"
        local spinstr=$temp${spinstr%"$temp"}
        sleep $delay
        printf "\b\b\b\b\b\b"
    done
    printf "      \b\b\b\b\b\b"
}

# Function to run commands silently with spinner
run_with_spinner() {
    "$@" &> /dev/null &
    spinner $!
}

while true; do
    echo "======================================="
    echo "      Jishnu Multi-Installer Menu      "
    echo "======================================="
    echo "1) Install Pterodactyl Panel"
    echo "2) Install Pterodactyl Wing"
    echo "3) Setup Cloudflare Machine"
    echo "4) Install Blueprint"
    echo "5) Install Nebula Theme"
    echo "6) Install Nebula Theme Plugin Installer"
    echo "0) Exit"
    echo -n "Enter your choice: "
    read choice

    case $choice in
        1)
            echo "Installing Pterodactyl Panel..."
            run_with_spinner git clone https://github.com/pterodactyl/panel.git
            run_with_spinner bash panel/install.sh
            ;;
        2)
            echo "Installing Pterodactyl Wing..."
            run_with_spinner curl -Lo wing.sh https://raw.githubusercontent.com/pterodactyl/wing/main/install.sh
            run_with_spinner bash wing.sh
            ;;
        3)
            echo "Setting up Cloudflare Machine..."
            run_with_spinner git clone https://github.com/cloudflare/cloudflared.git
            run_with_spinner bash cloudflared/install.sh
            ;;
        4)
            echo "Installing Blueprint..."
            run_with_spinner git clone https://github.com/jishnu/blueprint.git
            run_with_spinner bash blueprint/setup.sh
            ;;
        5)
            echo "Installing Nebula Theme..."
            run_with_spinner git clone https://github.com/jishnu/nebula-theme.git
            run_with_spinner bash nebula-theme/install.sh
            ;;
        6)
            echo "Installing Nebula Theme Plugin Installer..."
            run_with_spinner git clone https://github.com/jishnu/nebula-theme-plugin-installer.git
            run_with_spinner bash nebula-theme-plugin-installer/install.sh
            ;;
        0)
            echo "Exiting..."
            exit 0
            ;;
        *)
            echo "Invalid choice! Please try again."
            ;;
    esac
    echo ""
done
.
